define(["jquery"],function(t){"use strict";function e(e,p){function v(n){return x=t(n||f),e.modal&&b(),x.appendTo(o),x}function m(){return x.on({click:function(e){var n=t(e.target);(n.hasClass(s)||n.closest("a").hasClass(s))&&(e.preventDefault(),e.stopPropagation(),C.close())}}),x}function b(){return j=x.wrap(h).closest("."+u),j.on({click:function(e){var n=t(e.target);t.contains(x[0],n[0])?(n.hasClass(s)||n.closest("a").hasClass(s))&&(e.preventDefault(),e.stopPropagation(),C.close()):(e.preventDefault(),e.stopPropagation(),C.close())}}),j}function y(){var e,o,r,s;e=n.height(),x.css({left:0,"margin-left":0}),o=Math.max(i.scrollHeight,i.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),j&&j.height(e>o?e:o),r=t("."+d,x),r.height("inherit"),x.outerHeight(!0)>=e&&(s=t("."+l,x),e=e-2*parseFloat(x.css("margin-top"))-2*parseFloat(r.css("padding-top"))-s.outerHeight(!0),r.height(e)),w()}function w(){return x.css({left:"50%","margin-left":-x.outerWidth(!0)/2}),x}var x,j,C=this;return C.getMarkup=function(){return x},C.fill=function(e){var n;return t(e).hasClass(c)?(n=t(e),x.replaceWith(n),x=n):x.html(e),m(),C},C.open=function(){return x.addClass(r),j&&j.addClass(r),y(),n.on({keyup:function(t){27===t.keyCode&&C.close()},scroll:function(){x.css("top",i.scrollTop)}}),"onorientationchange"in window?n.on("orientationchange.scrollpane",function(){setTimeout(y,250)}):n.on("resize.scrollpane",function(){clearTimeout(g),g=setTimeout(y,250)}),x.trigger("open.on.dialog"),C},C.close=function(){return x.removeClass(r),j&&j.removeClass(r),n.off("resize orientationchange scroll keyup click hashchange"),x.trigger("close.on.dialog"),C},x=p||v(),j=e.modal?b():null,m(),C}var n,i,o,a,r="dialog_opened",s="dialog_close",c="dialog",l="dialog_header",d="dialog_content",u="dialog_modalBG",h='<div class="'+u+'" />',f='<div class="'+c+'"><div class="'+d+'">Daten werden geladen.</div></div>',p={modal:!0},g=null;return n=t(window),i=document.body,o=t(i),a=document.documentElement,{init:function(){return p},create:function(n,i){return new e(t.extend({},p,n),i)}}});