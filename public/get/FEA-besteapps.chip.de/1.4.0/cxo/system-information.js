define(["jquery","cookie"],function(e,t){"use strict";function n(){var e;for(e in h)if(d.match(RegExp(h[e])))return e;return p.VALUE_NOT_FOUND}function i(){var e;for(e in f)if(d.match(RegExp(f[e])))return e;return p.VALUE_NOT_FOUND}function o(t){var n=e.Deferred();return e.when(a(),r(t)).then(function(){n.resolve(u)}),n.promise()}function a(){var t=e.Deferred();return u.system?t.resolve(u.system):(e.extend(u,{system:{os:n(),browser:i()}}),t.resolve(u.system)),t.promise()}function r(n){var i,o=e.Deferred();return u.session?o.resolve(u.session):(i=t(l),i?(e.extend(u,{session:e.parseJSON(i)}),o.resolve(u.session)):(e.extend(u,{session:s(n)}),o.resolve(u.session))),o.promise()}function s(n){var i,o,a=t(l),r=a?e.parseJSON(a):{};n=n||{};for(i in n)n.hasOwnProperty(i)&&(r[i]="function"==typeof n[i]?n[i]():n[i]);return o=new Date,t.set(l,JSON.stringify(r),{expires:new Date(o.setUTCDate(o.getDate()+14)).toGMTString(),path:"/"}),r}function c(){var t=e("#currpage").css("font-size"),n={type:null,orientation:null};return t=isNaN(t)?parseInt(t,10):0,t>=500?n.type=p.TYPE_DESKTOP:t>=300?(n.type=p.TYPE_TABLET,n.orientation=p.ORIENTATION_LANDSCAPE,t>300&&(n.orientation=p.ORIENTATION_PORTRAIT)):n.type=p.TYPE_MOBILE,n}var l="cxo-"+window.location.hostname,d=navigator.userAgent,u={},p={TYPE_DESKTOP:"desktop",TYPE_TABLET:"tablet",TYPE_MOBILE:"mobile",ORIENTATION_LANDSCAPE:"landscape",ORIENTATION_PORTRAIT:"portrait",VALUE_NOT_FOUND:"other"},h={Windows:"(Windows)|(WinNT)|(Win98)",Android:"Android",iOS:"(iPad)|(iPhone)",Mac_OS:"(Mac_PowerPC)|(Macintosh)|(Mac OS)",Linux:"(X11)|(Linux)"},f={Firefox:"Firefox",Chrome:"Chrome","Internet Explorer":"MSIE",Opera:"Opera",Android:"Android",Safari:"Safari",iOS:"iPhone"};return e.extend({init:function(){},getAllInfo:o,getSystemInfo:a,getSessionInfo:r,setSessionInfo:s,getViewInfo:c},p)});