describe("HtmlReporter",function(){function e(e){return{getFullName:function(){return e}}}function t(e,t){for(var n=[],i=0;e.length>i;i++)e[i].className==t&&n.push(e[i]);return n}function n(e,n){var i=t(e,n);if(i.length>0)return i[0];throw Error("couldn't find div with class "+n)}var i,s,a,r;beforeEach(function(){i=new jasmine.Env,i.updateInterval=0,a=document.createElement("body"),r={body:a,location:{search:""}},s=new jasmine.HtmlReporter(r)}),it("should run only specs beginning with spec parameter",function(){r.location.search="?spec=run%20this",expect(s.specFilter(e("run this"))).toBeTruthy(),expect(s.specFilter(e("not the right spec"))).toBeFalsy(),expect(s.specFilter(e("not run this"))).toBeFalsy()}),describe("running without any specs",function(){var e;beforeEach(function(){e=i.currentRunner(),i.addReporter(s)}),it("should not error",function(){var t=function(){e.execute()};expect(t).not.toThrow()})}),describe("Matcher reporting",function(){var e,t,n,o=function(e){for(var t=e.getElementsByTagName("div"),n=0;t.length>n;n++)if(t[n].className.match(/resultMessage/))return t[n]};beforeEach(function(){n=new jasmine.FakeTimer,i.setTimeout=n.setTimeout,i.clearTimeout=n.clearTimeout,i.setInterval=n.setInterval,i.clearInterval=n.clearInterval,e=i.currentRunner();var a=new jasmine.Suite(i,"some suite");e.add(a),t=new jasmine.Spec(i,a,"some spec"),a.add(t),r.location.search="?",i.addReporter(s)}),describe("toContain",function(){it("should show actual and expected",function(){t.runs(function(){this.expect("foo").toContain("bar")}),e.execute(),n.tick(0);var i=o(a);expect(i.innerHTML).toMatch(/foo/),expect(i.innerHTML).toMatch(/bar/)})})}),describe("failure messages (integration)",function(){it("should add the failure message to the DOM (non-toEquals matchers)",function(){i.describe("suite",function(){i.it("will have log messages",function(){this.expect("a").toBeNull()})}),i.addReporter(s),i.execute();var e=a.getElementsByTagName("div"),t=n(e,"resultMessage fail");expect(t.innerHTML).toMatch(/Expected 'a' to be null/)}),it("should add the failure message to the DOM (non-toEquals matchers) html escaping",function(){i.describe("suite",function(){i.it("will have log messages",function(){this.expect("1 < 2").toBeNull()})}),i.addReporter(s),i.execute();var e=a.getElementsByTagName("div"),t=n(e,"resultMessage fail");expect(t.innerHTML).toMatch(/Expected '1 &lt; 2' to be null/)})}),describe("log messages",function(){it("should appear in the report of a failed spec",function(){i.describe("suite",function(){i.it("will have log messages",function(){this.log("this is a","multipart log message"),this.expect(!0).toBeFalsy()})}),i.addReporter(s),i.execute();var e=a.getElementsByTagName("div"),t=n(e,"specDetail failed");expect(t.innerHTML).toMatch("this is a multipart log message")}),xit("should work on IE without console.log.apply",function(){})}),describe("duplicate example names",function(){it("should report failures correctly",function(){i.describe("suite",function(){i.it("will have log messages",function(){this.log("this one fails!"),this.expect(!0).toBeFalsy()})}),i.describe("suite",function(){i.it("will have log messages",function(){this.log("this one passes!"),this.expect(!0).toBeTruthy()})}),i.addReporter(s),i.execute();var e=a.getElementsByTagName("div"),t=n(e,"specDetail failed");expect(t.className).toEqual("specDetail failed"),expect(t.innerHTML).toContain("this one fails!"),expect(t.innerHTML).not.toContain("this one passes!")})}),describe("#reportSpecStarting",function(){beforeEach(function(){i.describe("suite 1",function(){i.it("spec 1",function(){})}),spyOn(s,"log").andCallThrough()}),it("DOES NOT log running specs by default",function(){i.addReporter(s),i.execute(),expect(s.log).not.toHaveBeenCalled()}),it("logs running specs when log_running_specs is true",function(){s.logRunningSpecs=!0,i.addReporter(s),i.execute(),expect(s.log).toHaveBeenCalledWith(">> Jasmine Running suite 1 spec 1...")})})});