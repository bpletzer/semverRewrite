describe("TrivialReporter",function(){function e(e){return{getFullName:function(){return e}}}function t(e,t){for(var n=[],i=0;e.length>i;i++)e[i].className==t&&n.push(e[i]);return n}function n(e,n){var i=t(e,n);if(i.length>0)return i[0];throw Error("couldn't find div with class "+n)}var i,s,a,r;beforeEach(function(){i=new jasmine.Env,i.updateInterval=0,a=document.createElement("body"),r={body:a,location:{search:""}},s=new jasmine.TrivialReporter(r)}),it("should run only specs beginning with spec parameter",function(){r.location.search="?spec=run%20this",expect(s.specFilter(e("run this"))).toBeTruthy(),expect(s.specFilter(e("not the right spec"))).toBeFalsy(),expect(s.specFilter(e("not run this"))).toBeFalsy()}),it("should display empty divs for every suite when the runner is starting",function(){s.reportRunnerStarting({env:i,suites:function(){return[new jasmine.Suite({},"suite 1",null,null)]}});var e=t(a.getElementsByTagName("div"),"suite");expect(e.length).toEqual(1),expect(e[0].innerHTML).toContain("suite 1")}),describe("Matcher reporting",function(){var e,t,n,o=function(e){for(var t=e.getElementsByTagName("div"),n=0;t.length>n;n++)if(t[n].className.match(/resultMessage/))return t[n]};beforeEach(function(){n=new jasmine.FakeTimer,i.setTimeout=n.setTimeout,i.clearTimeout=n.clearTimeout,i.setInterval=n.setInterval,i.clearInterval=n.clearInterval,e=i.currentRunner();var a=new jasmine.Suite(i,"some suite");e.add(a),t=new jasmine.Spec(i,a,"some spec"),a.add(t),r.location.search="?",i.addReporter(s)}),describe("toContain",function(){it("should show actual and expected",function(){t.runs(function(){this.expect("foo").toContain("bar")}),e.execute(),n.tick(0);var i=o(a);expect(i.innerHTML).toMatch(/foo/),expect(i.innerHTML).toMatch(/bar/)})})}),describe("failure messages (integration)",function(){var e,t,r;beforeEach(function(){t={passed:function(){return!1},getItems:function(){}};var n=new jasmine.Suite(i,"suite 1",null,null);e={suite:n,getFullName:function(){return"foo"},results:function(){return t}},s.reportRunnerStarting({env:i,suites:function(){return[n]}})}),it("should add the failure message to the DOM (non-toEquals matchers)",function(){r=new jasmine.ExpectationResult({matcherName:"toBeNull",passed:!1,message:"Expected 'a' to be null, but it was not"}),spyOn(t,"getItems").andReturn([r]),s.reportSpecResults(e);var i=a.getElementsByTagName("div"),o=n(i,"resultMessage fail");expect(o.innerHTML).toEqual("Expected 'a' to be null, but it was not")}),it("should add the failure message to the DOM (non-toEquals matchers) html escaping",function(){r=new jasmine.ExpectationResult({matcherName:"toBeNull",passed:!1,message:"Expected '1 < 2' to <b>e null, & it was not"}),spyOn(t,"getItems").andReturn([r]),s.reportSpecResults(e);var i=a.getElementsByTagName("div"),o=n(i,"resultMessage fail");expect(o.innerHTML).toEqual("Expected '1 &lt; 2' to &lt;b&gt;e null, &amp; it was not")})}),describe("log messages",function(){it("should appear in the report",function(){i.describe("suite",function(){i.it("will have log messages",function(){this.log("this is a","multipart log message")})}),i.addReporter(s),i.execute();var e=a.getElementsByTagName("div"),t=n(e,"resultMessage log");expect(t.innerHTML).toEqual("this is a multipart log message")}),xit("should work on IE without console.log.apply",function(){})}),describe("duplicate example names",function(){it("should report failures correctly",function(){i.describe("suite",function(){i.it("will have log messages",function(){this.log("this one fails!"),this.expect(!0).toBeFalsy()})}),i.describe("suite",function(){i.it("will have log messages",function(){this.log("this one passes!"),this.expect(!0).toBeTruthy()})}),i.addReporter(s),i.execute();var e=a.getElementsByTagName("div"),t=n(e,"suite passed");expect(t.className).toEqual("suite passed"),expect(t.innerHTML).toContain("this one passes!"),expect(t.innerHTML).not.toContain("this one fails!");var r=n(e,"suite failed");expect(r.className).toEqual("suite failed"),expect(r.innerHTML).toContain("this one fails!"),expect(r.innerHTML).not.toContain("this one passes!")})}),describe("#reportSpecStarting",function(){var e;beforeEach(function(){i.describe("suite 1",function(){e=i.it("spec 1",function(){})})}),it("DOES NOT log running specs by default",function(){spyOn(s,"log"),s.reportSpecStarting(e),expect(s.log).not.toHaveBeenCalled()}),it("logs running specs when log_running_specs is true",function(){s.logRunningSpecs=!0,spyOn(s,"log"),s.reportSpecStarting(e),expect(s.log).toHaveBeenCalledWith(">> Jasmine Running suite 1 spec 1...")})})});